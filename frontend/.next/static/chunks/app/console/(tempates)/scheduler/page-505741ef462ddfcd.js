(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4715],{14455:function(e,t,a){Promise.resolve().then(a.bind(a,67684))},16463:function(e,t,a){"use strict";var l=a(71169);a.o(l,"usePathname")&&a.d(t,{usePathname:function(){return l.usePathname}}),a.o(l,"useRouter")&&a.d(t,{useRouter:function(){return l.useRouter}}),a.o(l,"useSearchParams")&&a.d(t,{useSearchParams:function(){return l.useSearchParams}})},67684:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return i}});var l=a(57437),s=a(2265),r=a(42126),n=a(95956),d=a(16463),c=a(20357);function i(e){let t=(0,d.useRouter)(),[a,i]=(0,s.useState)(!1),[o,u]=(0,s.useState)([]);async function h(){i(!0);try{await r.Z.get("".concat(c.env.NEXT_PUBLIC_API_URL,"/v1/scheduler/get-jobs"),{headers:{"Content-Type":"application/json",Authorization:"".concat(localStorage.getItem("token"))}}).then(e=>{console.log(e.data),u(e.data),i(!1)}).catch(e=>{console.log(e),i(!1),(0,n.Am)(e.response.data.message,{type:"error"})})}catch(e){setTimeout(()=>{var t,a;i(!1),(0,n.Am)(null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message,{type:"error"})},1e3)}}let[x,b]=(0,s.useState)(!1),[m,p]=(0,s.useState)(""),[g,k]=(0,s.useState)("*/5 * * * *"),[j,f]=(0,s.useState)("dauqu/date"),[v,w]=(0,s.useState)(!1);async function y(){w(!0),await r.Z.post("".concat(c.env.NEXT_PUBLIC_API_URL,"/v1/scheduler/new-job"),{name:m,schedule:"*/5 * * * *",image:j},{headers:{Authorization:"".concat(localStorage.getItem("token"))}}).then(e=>{w(!1),(0,n.Am)(e.data.message,{type:"success"}),b(!1),h()}).catch(e=>{console.log(e),w(!1),(0,n.Am)(e.response.data.message,{type:"error"}),h()})}let[N,C]=(0,s.useState)(!1),[S,_]=(0,s.useState)(null);async function A(e){await r.Z.delete("".concat(c.env.NEXT_PUBLIC_API_URL,"/v1/scheduler/delete-job/").concat(e),{headers:{Authorization:"".concat(localStorage.getItem("token"))}}).then(e=>{(0,n.Am)(e.data.message,{type:"success"}),h()}).catch(e=>{console.log(e),(0,n.Am)(e.response.data.message,{type:"error"}),h()})}return(0,s.useEffect)(()=>{h()},[]),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"flex w-auto h-full flex-col",children:(0,l.jsx)("blockquote",{className:"bg-gray-100 border-l-[5px] border-blue-600 dark:border-gray-500 dark:bg-gray-800",children:(0,l.jsxs)("div",{className:"h-auto dark:bg-slate-900 p-3 space-y-2",children:[(0,l.jsxs)("div",{className:"flex flex-col justify-between items-start",children:[(0,l.jsx)("h1",{className:"text-xl font-bold dark:text-gray-400 text-black",children:"Daucu Scheduler"}),(0,l.jsx)("span",{className:"text dark:text-gray-400 text-black text-xs",children:"Daucu Scheduler is a powerful task scheduling and automation tool designed to streamline and optimize business processes. With Daucu Scheduler, organizations can efficiently manage their workflows, ensuring tasks are executed at the right time and with precision."})]}),(0,l.jsx)("div",{className:"",children:(0,l.jsx)("button",{className:"btn btn-sm rounded-sm no-animation dark:btn-info capitalize",onClick:()=>{b(!0)},children:"New Jobs"})}),(0,l.jsx)("div",{className:"max-h-[75vh] overflow-y-scroll",children:a?(0,l.jsx)("div",{className:"animate-pulse flex space-x-4",children:(0,l.jsxs)("div",{className:"flex-1 space-y-4 py-1",children:[(0,l.jsx)("div",{className:"h-4 bg-slate-400 rounded w-3/4"}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("div",{className:"h-4 bg-slate-400 rounded"}),(0,l.jsx)("div",{className:"h-4 bg-slate-400 rounded w-5/6"})]})]})}):(0,l.jsx)("div",{children:null===o||(null==o?void 0:o.length)===0?(0,l.jsx)("div",{className:"h-[20vh] w-full flex justify-center items-center",children:(0,l.jsxs)("p",{className:"text-md font-bold dark:text-gray-400 text-black",children:["No cron jobs found. Create a new cron job to get started."," "]})}):(0,l.jsx)("div",{children:(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"table table-sm",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"dark:bg-slate-700 dark:text-gray-400 text-black bg-slate-200",children:[(0,l.jsx)("th",{}),(0,l.jsx)("th",{children:"Name"}),(0,l.jsx)("th",{children:"Images"}),(0,l.jsx)("th",{children:"Schedule"}),(0,l.jsx)("th",{children:"Created AT"}),(0,l.jsx)("th",{children:"Action"})]})}),(0,l.jsx)("tbody",{children:o&&null!==o&&(null==o?void 0:o.map((e,a)=>(0,l.jsxs)("tr",{className:"dark:bg-slate-700 dark:text-gray-400 text-black bg-slate-200",children:[(0,l.jsx)("th",{children:"1"}),(0,l.jsx)("td",{children:null==e?void 0:e.name}),(0,l.jsx)("td",{children:null==e?void 0:e.image}),(0,l.jsxs)("td",{children:[null==e?void 0:e.schedule,(0,l.jsx)("br",{})]}),(0,l.jsx)("td",{children:null==e?void 0:e.created_at}),(0,l.jsxs)("td",{className:"space-x-1",children:[(0,l.jsx)("button",{className:"btn btn-xs rounded-none btn-error no-animation",disabled:N===(null==e?void 0:e.label),onClick:()=>{_(null==e?void 0:e.label),A(null==e?void 0:e.label)},children:"Delete"}),(0,l.jsx)("button",{className:"btn btn-xs rounded-none no-animation",onClick:()=>{t.push("/console/scheduler/".concat(null==e?void 0:e.label))},children:"View â†’"})]})]},a)))})]})})})})})]})})}),(0,l.jsx)("dialog",{id:"my_modal_4",className:"modal rounded-none ".concat(x?"modal-open":""),children:(0,l.jsxs)("form",{method:"dialog",className:"modal-box w-11/12 max-w-5xl rounded-none dark:bg-slate-700 bg-slate-100",children:[(0,l.jsx)("h3",{className:"font-bold text-lg dark:text-gray-400 text-black",children:"Daucu Scheduler"}),(0,l.jsxs)("div",{className:"py-4",children:[(0,l.jsxs)("label",{className:"block",children:[(0,l.jsx)("span",{className:"text-gray-700 dark:text-slate-400 text-sm",children:"Name"}),(0,l.jsx)("input",{type:"text",className:"input input-sm input-bordered mt-1 block w-full rounded-none bg-white dark:bg-slate-800 dark:text-white text-black",placeholder:"Job Name",value:m,onChange:e=>p(e.target.value)})]}),(0,l.jsxs)("label",{className:"block mt-2",children:[(0,l.jsx)("span",{className:"text-gray-700 dark:text-slate-400 text-sm",children:"Select Time Interval"}),(0,l.jsxs)("ul",{class:"grid w-full gap-2 md:grid-cols-5 mt-1",children:[(0,l.jsxs)("li",{children:[(0,l.jsx)("input",{type:"radio",id:"1-minute",name:"time",value:"*/1 * * * *",class:"hidden peer",required:!0,onChange:e=>{k(e.target.value)}}),(0,l.jsx)("label",{for:"1-minute",class:"inline-flex items-center justify-between w-full p-2 text-gray-500 bg-white border border-gray-200 dark:border-slate-800 rounded-none cursor-pointer dark:peer-checked:text-blue-500 peer-checked:border-blue-600 peer-checked:text-blue-600 dark:bg-slate-800 dark:text-white",children:(0,l.jsx)("div",{class:"block",children:(0,l.jsx)("div",{class:"w-full text-base",children:"1 minute"})})})]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("input",{type:"radio",id:"5-minute",name:"time",value:"*/5 * * * *",class:"hidden peer",onChange:e=>{k(e.target.value)}}),(0,l.jsx)("label",{for:"5-minute",class:"inline-flex items-center justify-between w-full p-2 text-gray-500 bg-white border border-gray-200 dark:border-slate-800 rounded-none cursor-pointer dark:peer-checked:text-blue-500 peer-checked:border-blue-600 peer-checked:text-blue-600 dark:bg-slate-800 dark:text-white",children:(0,l.jsx)("div",{class:"block",children:(0,l.jsx)("div",{class:"w-full text-base",children:"5 minutes"})})})]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("input",{type:"radio",id:"10-minute",name:"time",value:"*/10 * * * *",class:"hidden peer",onChange:e=>{k(e.target.value)}}),(0,l.jsx)("label",{for:"10-minute",class:"inline-flex items-center justify-between w-full p-2 text-gray-500 bg-white border border-gray-200 dark:border-slate-800 rounded-none cursor-pointer dark:peer-checked:text-blue-500 peer-checked:border-blue-600 peer-checked:text-blue-600 dark:bg-slate-800 dark:text-white",children:(0,l.jsx)("div",{class:"block",children:(0,l.jsx)("div",{class:"w-full text-base",children:"10 minutes"})})})]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("input",{type:"radio",id:"15-minute",name:"time",value:"*/15 * * * *",class:"hidden peer",onChange:e=>{k(e.target.value)}}),(0,l.jsx)("label",{for:"15-minute",class:"inline-flex items-center justify-between w-full p-2 text-gray-500 bg-white border border-gray-200 dark:border-slate-800 rounded-none cursor-pointer dark:peer-checked:text-blue-500 peer-checked:border-blue-600 peer-checked:text-blue-600 dark:bg-slate-800 dark:text-white",children:(0,l.jsx)("div",{class:"block",children:(0,l.jsx)("div",{class:"w-full text-base",children:"15 minutes"})})})]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("input",{type:"radio",id:"30-minute",name:"time",value:"*/30 * * * *",class:"hidden peer",onChange:e=>{k(e.target.value)}}),(0,l.jsx)("label",{for:"30-minute",class:"inline-flex items-center justify-between w-full p-2 text-gray-500 bg-white border border-gray-200 dark:border-slate-800 rounded-none cursor-pointer dark:peer-checked:text-blue-500 peer-checked:border-blue-600 peer-checked:text-blue-600 dark:bg-slate-800 dark:text-white",children:(0,l.jsx)("div",{class:"block",children:(0,l.jsx)("div",{class:"w-full text-base",children:"30 minutes"})})})]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("input",{type:"radio",id:"1-hour",name:"time",value:"0 * * * *",class:"hidden peer",onChange:e=>{k(e.target.value)}}),(0,l.jsx)("label",{for:"1-hour",class:"inline-flex items-center justify-between w-full p-2 text-gray-500 bg-white border border-gray-200 dark:border-slate-800 rounded-none cursor-pointer dark:peer-checked:text-blue-500 peer-checked:border-blue-600 peer-checked:text-blue-600 dark:bg-slate-800 dark:text-white",children:(0,l.jsx)("div",{class:"block",children:(0,l.jsx)("div",{class:"w-full text-base",children:"1 hour"})})})]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("input",{type:"radio",id:"1-day",name:"time",value:"0 0 * * *",class:"hidden peer",onChange:e=>{k(e.target.value)}}),(0,l.jsx)("label",{for:"1-day",class:"inline-flex items-center justify-between w-full p-2 text-gray-500 bg-white border border-gray-200 dark:border-slate-800 rounded-none cursor-pointer dark:peer-checked:text-blue-500 peer-checked:border-blue-600 peer-checked:text-blue-600 dark:bg-slate-800 dark:text-white",children:(0,l.jsx)("div",{class:"block",children:(0,l.jsx)("div",{class:"w-full text-base",children:"1 day"})})})]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("input",{type:"radio",id:"1-week",name:"time",value:"0 0 * * 0",class:"hidden peer",onChange:e=>{k(e.target.value)}}),(0,l.jsx)("label",{for:"1-week",class:"inline-flex items-center justify-between w-full p-2 text-gray-500 bg-white border border-gray-200 dark:border-slate-800 rounded-none cursor-pointer dark:peer-checked:text-blue-500 peer-checked:border-blue-600 peer-checked:text-blue-600 dark:bg-slate-800 dark:text-white",children:(0,l.jsx)("div",{class:"block",children:(0,l.jsx)("div",{class:"w-full text-base",children:"1 week"})})})]})]})]}),(0,l.jsxs)("label",{className:"block mt-2",children:[(0,l.jsx)("span",{className:"text-gray-700 dark:text-slate-400 text-sm",children:"Schedule"}),(0,l.jsx)("input",{type:"text",className:"input input-sm input-bordered mt-1 block w-full rounded-none bg-white dark:bg-slate-800 dark:text-white text-black",placeholder:"*/5 * * * *",value:g,onChange:e=>{k(e.target.value)}})]}),(0,l.jsxs)("label",{className:"block mt-5",children:[(0,l.jsx)("span",{className:"text-gray-700 dark:text-slate-400 text-sm",children:"Public Image Link"}),(0,l.jsx)("input",{type:"text",className:"input input-sm input-bordered mt-1 block w-full rounded-none bg-white dark:bg-slate-800 dark:text-white text-black",placeholder:"https://www.google.com/",value:j,onChange:e=>f(e.target.value)})]})]}),(0,l.jsxs)("div",{className:"modal-action",children:[(0,l.jsx)("button",{className:"btn btn-sm rounded-sm capitalize",onClick:()=>b(!1),children:"Close"}),(0,l.jsx)("button",{className:"btn btn-sm rounded-sm btn-success capitalize",onClick:()=>{y()},disabled:v,children:v?"Creating Job...":"Create Job"})]})]})})]})}}},function(e){e.O(0,[147,5956,2971,7023,1744],function(){return e(e.s=14455)}),_N_E=e.O()}]);