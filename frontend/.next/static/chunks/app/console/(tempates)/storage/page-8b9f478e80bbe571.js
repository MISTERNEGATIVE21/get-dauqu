(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8352],{96534:function(e,a,t){Promise.resolve().then(t.bind(t,94698))},16463:function(e,a,t){"use strict";var s=t(71169);t.o(s,"usePathname")&&t.d(a,{usePathname:function(){return s.usePathname}}),t.o(s,"useRouter")&&t.d(a,{useRouter:function(){return s.useRouter}}),t.o(s,"useSearchParams")&&t.d(a,{useSearchParams:function(){return s.useSearchParams}})},94698:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return d}});var s=t(57437),l=t(2265),n=t(42126),r=t(95956),o=t(16463),c=t(20357);function d(e){let a=(0,o.useRouter)(),[t,d]=(0,l.useState)(!1),[i,u]=(0,l.useState)([]);async function h(){d(!0);try{await n.Z.get("".concat(c.env.NEXT_PUBLIC_API_URL,"/v1/storage/get-buckets"),{headers:{"Content-Type":"application/json",Authorization:"".concat(localStorage.getItem("token"))}}).then(e=>{console.log(e.data),u(e.data),d(!1)}).catch(e=>{console.log(e),d(!1),(0,r.Am)(e.response.data.message,{type:"error"})})}catch(e){setTimeout(()=>{var a,t;d(!1),(0,r.Am)(null===(t=e.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.message,{type:"error"})},1e3)}}let[x,m]=(0,l.useState)(!1),[b,g]=(0,l.useState)(""),[j,k]=(0,l.useState)("ap-south-1"),[p,v]=(0,l.useState)("20"),[N,f]=(0,l.useState)(!1);async function y(){f(!0),await n.Z.post("".concat(c.env.NEXT_PUBLIC_API_URL,"/v1/storage/create-bucket"),{label:b,region:j,size:p},{headers:{Authorization:"".concat(localStorage.getItem("token"))}}).then(e=>{f(!1),(0,r.Am)(e.data.message,{type:"success"}),m(!1),h()}).catch(e=>{console.log(e),f(!1),(0,r.Am)(e.response.data.message,{type:"error"}),h()})}let[w,_]=(0,l.useState)(null);async function C(e){_(e),await n.Z.delete("".concat(c.env.NEXT_PUBLIC_API_URL,"/v1/storage/delete-bucket/").concat(e),{headers:{Authorization:"".concat(localStorage.getItem("token"))}}).then(e=>{(0,r.Am)(e.data.message,{type:"success"}),_(""),h()}).catch(e=>{console.log(e),_(""),(0,r.Am)(e.response.data.message,{type:"error"}),h()})}return(0,l.useEffect)(()=>{h()},[]),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"flex w-auto h-full flex-col",children:(0,s.jsx)("blockquote",{className:"bg-gray-100 border-l-[5px] border-blue-600 dark:border-gray-500 dark:bg-gray-800",children:(0,s.jsxs)("div",{className:"h-auto dark:bg-slate-900 p-3",children:[(0,s.jsxs)("div",{className:"flex flex-col justify-between items-start h-[50px]",children:[(0,s.jsx)("h1",{className:"text-xl font-bold dark:text-gray-400 text-black",children:"Daucu Storage"}),(0,s.jsx)("span",{className:"text dark:text-gray-400 text-black text-xs",children:"An S3-Compatible Object Storage service offers a robust solution for storing and managing data in an S3-compatible format. It enables secure, scalable, and cost-effective storage, supporting various applications and workloads."})]}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{className:"btn btn-sm mt-2 rounded-none no-animation dark:btn-info capitalize",onClick:()=>{m(!0)},children:"Create New Bucket"})}),(0,s.jsx)("div",{className:"max-h-[75vh] mt-5 overflow-y-scroll",children:t?(0,s.jsx)("div",{className:"animate-pulse flex space-x-4",children:(0,s.jsxs)("div",{className:"flex-1 space-y-4 py-1",children:[(0,s.jsx)("div",{className:"h-4 bg-slate-400 rounded w-3/4"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{className:"h-4 bg-slate-400 rounded"}),(0,s.jsx)("div",{className:"h-4 bg-slate-400 rounded w-5/6"})]})]})}):(0,s.jsx)("div",{children:null===i||(null==i?void 0:i.length)===0?(0,s.jsx)("div",{className:"h-[20vh] w-full flex justify-center items-center",children:(0,s.jsxs)("p",{className:"text-md font-bold dark:text-gray-400 text-black",children:["No Disk found. Create a new disk to get started."," "]})}):(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"table table-sm",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"dark:bg-slate-700 dark:text-gray-400 text-black bg-slate-200",children:[(0,s.jsx)("th",{}),(0,s.jsx)("th",{children:"Name"}),(0,s.jsx)("th",{children:"Label"}),(0,s.jsx)("th",{children:"Size"}),(0,s.jsx)("th",{children:"Created AT"}),(0,s.jsx)("th",{children:"Action"})]})}),(0,s.jsx)("tbody",{children:i&&null!==i&&(null==i?void 0:i.map((e,t)=>(0,s.jsxs)("tr",{className:"dark:bg-slate-700 dark:text-gray-400 text-black bg-slate-200",children:[(0,s.jsx)("th",{children:"1"}),(0,s.jsx)("td",{children:null==e?void 0:e.label}),(0,s.jsx)("td",{children:null==e?void 0:e.label}),(0,s.jsxs)("td",{children:[null==e?void 0:e.size," GB SSD ",(0,s.jsx)("br",{})]}),(0,s.jsx)("td",{children:null==e?void 0:e.created_at}),(0,s.jsxs)("td",{className:"space-x-1",children:[(0,s.jsx)("button",{className:"btn btn-xs rounded-none btn-error no-animation",disabled:w===(null==e?void 0:e._id),onClick:()=>{_(null==e?void 0:e._id),C(null==e?void 0:e._id)},children:w===(null==e?void 0:e._id)?"Deleting...":"Delete"}),(0,s.jsx)("button",{className:"btn btn-xs rounded-none no-animation",onClick:()=>{a.push("/console/storage/".concat(null==e?void 0:e._id))},children:"View â†’"})]})]},t)))})]})})})})})]})})}),(0,s.jsx)("dialog",{id:"my_modal_4",className:"modal rounded-none ".concat(x?"modal-open":""),children:(0,s.jsxs)("form",{method:"dialog",className:"modal-box w-11/12 max-w-5xl rounded-none dark:bg-slate-700 bg-slate-100",children:[(0,s.jsx)("h3",{className:"font-bold text-lg",children:"Create a new disk"}),(0,s.jsxs)("div",{className:"py-4",children:[(0,s.jsxs)("label",{className:"block",children:[(0,s.jsx)("span",{className:"text-gray-700 dark:text-slate-400",children:"Name*"}),(0,s.jsx)("input",{type:"text",className:"input input-sm input-bordered mt-1 block w-full rounded-none bg-slate-200 dark:bg-slate-800 text-black dark:text-white",placeholder:"Enter disk name",value:b,onChange:e=>g(e.target.value)})]}),(0,s.jsxs)("label",{className:"block mt-5",children:[(0,s.jsx)("span",{className:"text-gray-700 dark:text-slate-400",children:"Size (GB)*"}),(0,s.jsx)("input",{type:"number",className:"input input-sm input-bordered mt-1 block w-full rounded-none bg-slate-200 dark:bg-slate-800 text-black dark:text-white",placeholder:"Enter disk name",value:p,onChange:e=>v(e.target.value)})]}),(0,s.jsxs)("label",{className:"block mt-5",children:[(0,s.jsx)("span",{className:"text-gray-700 dark:text-slate-400",children:"Region*"}),(0,s.jsx)("select",{className:"select select-bordered select-sm w-full rounded-none bg-slate-200 dark:bg-slate-800 text-black dark:text-white",value:j,onChange:e=>k(e.target.value),children:(0,s.jsx)("option",{value:"ap-south-1",children:"Mumbai (India)"})})]})]}),(0,s.jsxs)("div",{className:"modal-action",children:[(0,s.jsx)("button",{className:"btn btn-sm rounded-none",onClick:()=>m(!1),children:"Close"}),(0,s.jsx)("button",{className:"btn btn-sm rounded-none btn-success",onClick:()=>{y()},disabled:N,children:N?"Creating Disk...":"Create Disk"})]})]})})]})}}},function(e){e.O(0,[147,5956,2971,7023,1744],function(){return e(e.s=96534)}),_N_E=e.O()}]);