(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1067],{75271:function(e,s,t){Promise.resolve().then(t.bind(t,5875))},16463:function(e,s,t){"use strict";var a=t(71169);t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},5875:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return d}});var a=t(57437),l=t(2265),n=t(42126),r=t(95956),c=t(16463),i=t(20357);function d(e){let s=(0,c.useRouter)(),[t,d]=(0,l.useState)(!1),[o,x]=(0,l.useState)([]);async function u(){d(!0);try{await n.Z.get("".concat(i.env.NEXT_PUBLIC_API_URL,"/v1/mysql/get-clusters"),{headers:{"Content-Type":"application/json",Authorization:"".concat(localStorage.getItem("token"))}}).then(e=>{console.log(e.data),x(e.data.clusters),d(!1)}).catch(e=>{console.log(e),d(!1),(0,r.Am)(e.response.data.message,{type:"error"})})}catch(e){setTimeout(()=>{var s,t;d(!1),(0,r.Am)(null===(t=e.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.message,{type:"error"})},1e3)}}let[h,m]=(0,l.useState)(!1),[b,p]=(0,l.useState)(""),[j,g]=(0,l.useState)("ap-south-1"),[k,f]=(0,l.useState)("20"),[v,y]=(0,l.useState)(""),[N,w]=(0,l.useState)(""),[C,P]=(0,l.useState)(!1),[S,_]=(0,l.useState)(!1);async function A(){_(!0),await n.Z.post("".concat(i.env.NEXT_PUBLIC_API_URL,"/v1/mysql/new-cluster"),{name:b,mysql_version:"8.3.0",size:k,username:v,password:N,hight_availability:C},{headers:{Authorization:"".concat(localStorage.getItem("token"))}}).then(e=>{_(!1),(0,r.Am)(e.data.message,{type:"success"}),m(!1),u()}).catch(e=>{console.log(e),_(!1),(0,r.Am)(e.response.data.message,{type:"error"}),u()})}async function U(e){await n.Z.delete("".concat(i.env.NEXT_PUBLIC_API_URL,"/v1/mysql/delete-cluster/").concat(e),{headers:{Authorization:"".concat(localStorage.getItem("token"))}}).then(e=>{(0,r.Am)(e.data.message,{type:"success"}),u()}).catch(e=>{console.log(e),(0,r.Am)(e.response.data.message,{type:"error"}),u()})}return(0,l.useEffect)(()=>{u()},[]),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex w-auto h-full flex-col",children:(0,a.jsx)("blockquote",{className:"bg-gray-100 border-l-[5px] border-blue-600 dark:border-gray-500 dark:bg-gray-800",children:(0,a.jsxs)("div",{className:"h-auto dark:bg-slate-900 p-2 space-y-3",children:[(0,a.jsxs)("div",{className:"flex flex-col justify-between items-start",children:[(0,a.jsx)("h1",{className:"text-xl font-bold dark:text-gray-400 text-black",children:"MySQL database Cluster"}),(0,a.jsx)("span",{className:"text dark:text-gray-400 text-black text-xs",children:"A Managed MySQL Database service simplifies MySQL database hosting and administration, taking care of infrastructure, backups, high availability, security, and scaling. It enables businesses to focus on their applications and data rather than the complexities of database management."})]}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{className:"btn btn-sm rounded-none no-animation dark:btn-info btn-glass capitalize",onClick:()=>{m(!0)},children:"Create Cluster"})}),(0,a.jsx)("div",{className:"max-h-[75vh] mt-5 overflow-y-scroll",children:t?(0,a.jsx)("div",{className:"animate-pulse flex space-x-4",children:(0,a.jsxs)("div",{className:"flex-1 space-y-4 py-1",children:[(0,a.jsx)("div",{className:"h-4 bg-slate-400 rounded w-3/4"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"h-4 bg-slate-400 rounded"}),(0,a.jsx)("div",{className:"h-4 bg-slate-400 rounded w-5/6"})]})]})}):(0,a.jsx)("div",{children:null===o||(null==o?void 0:o.length)===0?(0,a.jsx)("div",{className:"h-[20vh] w-full flex justify-center items-center",children:(0,a.jsx)("p",{className:"text-md font-bold dark:text-gray-400 text-black",children:"No Database Cluster Found !"})}):(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"table table-sm",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"dark:bg-slate-700 bg-slate-200 dark:text-gray-400 text-black",children:[(0,a.jsx)("th",{}),(0,a.jsx)("th",{children:"Cluster Name"}),(0,a.jsx)("th",{children:"MySQL Version"}),(0,a.jsx)("th",{children:"Hight Availability"}),(0,a.jsx)("th",{children:"Created AT"}),(0,a.jsx)("th",{children:"Action"})]})}),(0,a.jsx)("tbody",{children:o&&null!==o&&(null==o?void 0:o.map((e,t)=>(0,a.jsxs)("tr",{className:"dark:bg-slate-700 bg-slate-200 dark:text-gray-400 text-black",children:[(0,a.jsx)("th",{children:"1"}),(0,a.jsx)("td",{children:null==e?void 0:e.name}),(0,a.jsx)("td",{children:null==e?void 0:e.mysql_version}),(0,a.jsx)("td",{children:(null==e?void 0:e.hight_availability)?(0,a.jsx)("span",{className:"text-green-500",children:"Enabled"}):(0,a.jsx)("span",{className:"text-red-500",children:"Disabled"})}),(0,a.jsx)("td",{children:null==e?void 0:e.createdAt}),(0,a.jsxs)("td",{className:"space-x-1",children:[(0,a.jsx)("button",{className:"btn btn-xs rounded-none btn-error no-animation",onClick:()=>{U(null==e?void 0:e._id)},children:"Delete"}),(0,a.jsx)("button",{className:"btn btn-xs rounded-none no-animation",onClick:()=>{s.push("/console/mysql/".concat(null==e?void 0:e.namespace))},children:"View â†’"})]})]},t)))})]})})})})})]})})}),(0,a.jsx)("dialog",{id:"my_modal_4",className:"modal rounded-none ".concat(h?"modal-open":""),children:(0,a.jsxs)("form",{method:"dialog",className:"modal-box w-11/12 max-w-5xl rounded-none dark:bg-slate-700 bg-slate-100",children:[(0,a.jsx)("h3",{className:"font-bold text-lg dark:text-gray-400 text-black",children:"Create a new cluster"}),(0,a.jsxs)("div",{className:"py-4",children:[(0,a.jsxs)("label",{className:"block",children:[(0,a.jsx)("span",{className:"text-gray-700 dark:text-slate-400",children:"Name*"}),(0,a.jsx)("input",{type:"text",className:"input input-sm input-bordered mt-1 block w-full rounded-none bg-slate-200 dark:bg-slate-800 text-black dark:text-white",placeholder:"Enter cluster name",value:b,onChange:e=>p(e.target.value)})]}),(0,a.jsxs)("label",{className:"block mt-5",children:[(0,a.jsx)("span",{className:"text-gray-700 dark:text-slate-400 text-sm",children:"Select Cluster Size* (GB)"}),(0,a.jsxs)("ul",{class:"grid w-full gap-2 md:grid-cols-5 mt-1",children:[(0,a.jsxs)("li",{children:[(0,a.jsx)("input",{type:"radio",id:"1-minute",name:"time",value:"1",class:"hidden peer",required:!0,onChange:e=>{f(e.target.value)}}),(0,a.jsx)("label",{for:"1-minute",class:"inline-flex items-center justify-between w-full p-2 text-gray-500 bg-white border border-gray-200 dark:border-slate-800 rounded-none cursor-pointer dark:peer-checked:text-blue-500 peer-checked:border-blue-600 peer-checked:text-blue-600 dark:bg-slate-800 dark:text-white",children:(0,a.jsx)("div",{class:"block",children:(0,a.jsxs)("div",{class:"w-full text-base flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-start space-x-1",children:[(0,a.jsx)("span",{children:"1 GB "}),(0,a.jsx)("span",{className:"text-xs",children:"Ram"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-start space-x-1",children:[(0,a.jsx)("span",{children:"1 vCPU "}),(0,a.jsx)("span",{className:"text-xs",children:"CPU"})]})]})})})]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("input",{type:"radio",id:"5-minute",name:"time",value:"5",class:"hidden peer",onChange:e=>{f(e.target.value)}}),(0,a.jsx)("label",{for:"5-minute",class:"inline-flex items-center justify-between w-full p-2 text-gray-500 bg-white border border-gray-200 dark:border-slate-800 rounded-none cursor-pointer dark:peer-checked:text-blue-500 peer-checked:border-blue-600 peer-checked:text-blue-600 dark:bg-slate-800 dark:text-white",children:(0,a.jsx)("div",{class:"block",children:(0,a.jsxs)("div",{class:"w-full text-base flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-start space-x-1",children:[(0,a.jsx)("span",{children:"1 GB "}),(0,a.jsx)("span",{className:"text-xs",children:"Ram"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-start space-x-1",children:[(0,a.jsx)("span",{children:"1 vCPU "}),(0,a.jsx)("span",{className:"text-xs",children:"CPU"})]})]})})})]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("input",{type:"radio",id:"10-minute",name:"time",value:"10",class:"hidden peer",onChange:e=>{f(e.target.value)}}),(0,a.jsx)("label",{for:"10-minute",class:"inline-flex items-center justify-between w-full p-2 text-gray-500 bg-white border border-gray-200 dark:border-slate-800 rounded-none cursor-pointer dark:peer-checked:text-blue-500 peer-checked:border-blue-600 peer-checked:text-blue-600 dark:bg-slate-800 dark:text-white",children:(0,a.jsx)("div",{class:"block",children:(0,a.jsxs)("div",{class:"w-full text-base flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-start space-x-1",children:[(0,a.jsx)("span",{children:"1 GB "}),(0,a.jsx)("span",{className:"text-xs",children:"Ram"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-start space-x-1",children:[(0,a.jsx)("span",{children:"1 vCPU "}),(0,a.jsx)("span",{className:"text-xs",children:"CPU"})]})]})})})]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("input",{type:"radio",id:"15-minute",name:"time",value:"15",class:"hidden peer",onChange:e=>{f(e.target.value)}}),(0,a.jsx)("label",{for:"15-minute",class:"inline-flex items-center justify-between w-full p-2 text-gray-500 bg-white border border-gray-200 dark:border-slate-800 rounded-none cursor-pointer dark:peer-checked:text-blue-500 peer-checked:border-blue-600 peer-checked:text-blue-600 dark:bg-slate-800 dark:text-white",children:(0,a.jsx)("div",{class:"block",children:(0,a.jsxs)("div",{class:"w-full text-base flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-start space-x-1",children:[(0,a.jsx)("span",{children:"1 GB "}),(0,a.jsx)("span",{className:"text-xs",children:"Ram"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-start space-x-1",children:[(0,a.jsx)("span",{children:"1 vCPU "}),(0,a.jsx)("span",{className:"text-xs",children:"CPU"})]})]})})})]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("input",{type:"radio",id:"30-minute",name:"time",value:"30",class:"hidden peer",onChange:e=>{f(e.target.value)}}),(0,a.jsx)("label",{for:"30-minute",class:"inline-flex items-center justify-between w-full p-2 text-gray-500 bg-white border border-gray-200 dark:border-slate-800 rounded-none cursor-pointer dark:peer-checked:text-blue-500 peer-checked:border-blue-600 peer-checked:text-blue-600 dark:bg-slate-800 dark:text-white",children:(0,a.jsx)("div",{class:"block",children:(0,a.jsxs)("div",{class:"w-full text-base flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-start space-x-1",children:[(0,a.jsx)("span",{children:"1 GB "}),(0,a.jsx)("span",{className:"text-xs",children:"Ram"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-start space-x-1",children:[(0,a.jsx)("span",{children:"1 vCPU "}),(0,a.jsx)("span",{className:"text-xs",children:"CPU"})]})]})})})]})]})]}),(0,a.jsxs)("label",{className:"block mt-5",children:[(0,a.jsx)("span",{className:"text-gray-700 dark:text-slate-400",children:"Size (GB)*"}),(0,a.jsx)("input",{type:"number",className:"input input-sm input-bordered mt-1 block w-full rounded-none bg-slate-200 dark:bg-slate-800 text-black dark:text-white",value:k,onChange:e=>f(e.target.value)})]}),(0,a.jsxs)("label",{className:"block mt-5",children:[(0,a.jsx)("span",{className:"text-gray-700 dark:text-slate-400",children:"Username*"}),(0,a.jsx)("input",{type:"text",className:"input input-sm input-bordered mt-1 block w-full rounded-none bg-slate-200 dark:bg-slate-800 text-black dark:text-white",placeholder:"MySQL Root Username",value:v,onChange:e=>y(e.target.value)})]}),(0,a.jsxs)("label",{className:"block mt-5",children:[(0,a.jsx)("span",{className:"text-gray-700 dark:text-slate-400",children:"Password*"}),(0,a.jsx)("input",{type:"text",className:"input input-sm input-bordered mt-1 block w-full rounded-none bg-slate-200 dark:bg-slate-800 text-black dark:text-white",placeholder:"MySQL Root Password",value:N,onChange:e=>w(e.target.value)})]}),(0,a.jsxs)("label",{className:"block mt-5",children:[(0,a.jsx)("span",{className:"text-gray-700 dark:text-slate-400",children:"Enable Hight Availability ?"}),(0,a.jsx)("input",{type:"checkbox",className:"checkbox mt-1 block rounded-sm bg-slate-200 dark:bg-slate-800 text-black dark:text-white",checked:C,onChange:()=>P(!C)})]})]}),(0,a.jsxs)("div",{className:"modal-action space-x-1",children:[(0,a.jsx)("button",{className:"btn btn-sm rounded-none capitalize",onClick:()=>m(!1),children:"Close"}),(0,a.jsx)("button",{className:"btn btn-sm rounded-none btn-success capitalize",onClick:()=>{A()},disabled:S,children:S?"Creating Cluster...":"Create Cluster"})]})]})})]})}}},function(e){e.O(0,[147,5956,2971,7023,1744],function(){return e(e.s=75271)}),_N_E=e.O()}]);